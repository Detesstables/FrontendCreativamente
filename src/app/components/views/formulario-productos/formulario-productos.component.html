<app-navbar></app-navbar>

<div class="formularioProducto container mt-5">
    <h2>Formulario de Producto</h2>
    <form [formGroup]="formularioProductos" (submit)="crearProducto()">
      <div class="form-group">
        <label for="nombre">Nombre del Producto</label>
        <input type="text" class="form-control" id="nombre" placeholder="Ingrese el nombre del producto" formControlName="nombre_producto">
      </div>
      <div class="form-group">
        <label for="precio">Precio</label>
        <input type="number" class="form-control" id="precio" placeholder="Ingrese el precio del producto" formControlName="precio">
      </div>
      <div class="form-group">
        <label for="imagen">Imagen</label>
        <div class="custom-file">
          <input type="file" class="custom-file-input" id="imagen" formControlName="imagen">
        </div>
      </div>
      <div class="form-group">
        <label for="stock">Stock</label>
        <input type="number" class="form-control" id="stock" placeholder="Ingrese la cantidad en stock" formControlName="stock">
      </div>
      <!-- IMPORTANTE AÑADIR VALUE PARA DECIRLE QUE SERA LA CATEGORIA  -->
      <div class="form-group mt-3">
        <select class="form-select form-select-lg mb-3" aria-label="Large select example" formControlName="categoria">
          <option selected disabled>Selecciona una categoria</option>
          @for (categoria of categoriasLista; track $index) {
            <option [ngValue]="categoria.id_categoria">{{categoria.nombre_categoria}}</option>
          }   
        </select>
      </div>
      <button type="submit" class="btn btn-primary mt-4">Guardar</button>
    </form>
  </div>


  <div class="container mt-5">
    <table class="table">
      <thead>
        <tr>
          <th scope="col">ID</th>
          <th scope="col">Nombre</th>
          <th scope="col">Precio</th>
          <th scope="col">Imagen</th>
          <th scope="col">Stock</th>
          <th scope="col">Categoria</th>
        </tr>
      </thead>
      <tbody>
        @for (producto of productosLista; track $index) {
          <tr>
            <th scope="row">{{producto.id_producto}}</th>
            <td>{{producto.nombre_producto}}</td>
            <td>{{producto.precio}}</td>
            <td> <img src="{{producto.imagen}}" alt="Imagen del producto" style="max-width: 100px; max-height: 100px;"> </td>
            <td>{{producto.stock}}</td>
            <td>{{producto.categoria.nombre_categoria}}</td>
          </tr>
        }
      </tbody>
    </table>
  </div>











<!--   <div class="form-group">
    <label for="categoria">Categoría</label>
    <select class="form-control" id="categoria" formControlName="categoria">
      <option selected>Open this select menu</option>
      @for (categoria of categoriasLista; track $index) {
        <option [value]="categoria.id_categoria">{{categoria.nombre_categoria}}</option>
      }
    </select>
  </div> -->


<!--   <div class="form-group mt-3">
    <select class="form-select form-select-lg mb-3" aria-label="Large select example" formControlName="categoria">
      <option selected disabled>Selecciona una categoria</option>
      @for (categoria of categoriasLista; track $index) {
        <option [ngValue]="categoria.id_categoria" >{{categoria.nombre_categoria}}</option>
      }   
    </select>
  </div> -->